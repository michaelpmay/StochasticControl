classdef DynamicControlOptimizer < SteadyStateControlOptimizer
  properties
    model
    score
    generator=TwoCellFSPGenerator
    time
    uRange=linspace(0,1,100);
  end
  methods
    function DynamicControlOptimizer()
      build=ModelFactory:
      build.autoretulated
    end
    function getSnapshotScore(time)
      probability=obj.model.snapTime(time);
      score=obj.score.getScore(probability);
    end
    function item=optimize(obj,item)
      for i=1:length(obj.time)
        obj=obj.opimizeStep()
      end
    end
    function obj=optimizeStep(obj,probability)
      lenRange=length(obj.uRange)
      for i=1:lenRange
        infG=obj.generator.getInfGenerator(obj.uRange(i));
        infScore(i)=obj.score.getScore(infG*probability(:)');
      end
      [controlInput,index]=min(infScore);
      obj.controlInput=controlInput;
    end
    function convertToHistogram(obj,trajectory)
      
    end
    
  end
end